<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Conservation International" name="author"/>
<link href="../../../../img/favicon.ico" rel="shortcut icon"/>
<title>GUI main - CPLUS</title>
<link href="../../../../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../../../../css/font-awesome.min.css" rel="stylesheet"/>
<link href="../../../../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" rel="stylesheet"/>
<link href="../../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script defer="" src="../../../../js/jquery-1.10.2.min.js"></script>
<script defer="" src="../../../../js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="../../../../../pdfs/CPLUS.pdf" rel="alternate" title="PDF" type="application/pdf"/></head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="../../../..">CPLUS</a>
<!-- Expander button -->
<button class="navbar-toggler" data-target="#navbar-collapse" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="navitem">
<a class="nav-link" href="../../../..">Home</a>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Users <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../../../user/">Users</a>
</li>
<li>
<a class="dropdown-item" href="../../../../user/quickstart/">Quick Start</a>
</li>
<li>
<a class="dropdown-item" href="../../../../user/guide/">Guide</a>
</li>
<li>
<a class="dropdown-item" href="../../../../user/manual/">Manual</a>
</li>
</ul>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Administrators <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../../../administrator/">Administrators</a>
</li>
<li>
<a class="dropdown-item" href="../../../../administrator/guide/">Guide</a>
</li>
<li>
<a class="dropdown-item" href="../../../../administrator/repository/">Repository</a>
</li>
</ul>
</li>
<li class="dropdown active">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Developers <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../../">Developers</a>
</li>
<li>
<a class="dropdown-item" href="../../../setup/">Setup</a>
</li>
<li>
<a class="dropdown-item" href="../../../architecture/">Architecture</a>
</li>
<li>
<a class="dropdown-item" href="../../../documentation/">Documentation</a>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">API</a>
<ul class="dropdown-menu">
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">Core</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../core/api_main/">Main</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_conf/">Configuration</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_settings/">Settings</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_utils/">Utilities</a>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">Reports</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../core/api_reports_generator/">Generator</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_reports_layout_items/">Layout items</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_reports_manager/">Manager</a>
</li>
<li>
<a class="dropdown-item" href="../../core/api_reports_variables/">Variables</a>
</li>
</ul>
</li>
<li>
<a class="dropdown-item" href="../../core/api_pilot_extent/">Extents</a>
</li>
</ul>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">Models</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../models/api_base/">Model base</a>
</li>
<li>
<a class="dropdown-item" href="../../models/api_helpers/">Helpers</a>
</li>
<li>
<a class="dropdown-item" href="../../models/api_report/">Report</a>
</li>
</ul>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">GUI</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item active" href="./">GUI main</a>
</li>
<li>
<a class="dropdown-item" href="../api_carbon_layer_model/">Carbon item model</a>
</li>
<li>
<a class="dropdown-item" href="../api_component_items/">Component item model</a>
</li>
<li>
<a class="dropdown-item" href="../api_im_editor_dialog/">Implementation model editor</a>
</li>
<li>
<a class="dropdown-item" href="../api_im_widget/">Implementation model widget</a>
</li>
<li>
<a class="dropdown-item" href="../api_items_selection_dialog/">Items selection dialog</a>
</li>
<li>
<a class="dropdown-item" href="../api_map_repeat_item_widget/">Map repeat item widget</a>
</li>
<li>
<a class="dropdown-item" href="../api_model_component_widget/">Model component widget</a>
</li>
<li>
<a class="dropdown-item" href="../api_ncs_pathway_editor/">NCS Pathway editor</a>
</li>
<li>
<a class="dropdown-item" href="../api_pixel_value_editor/">Pixel values</a>
</li>
<li>
<a class="dropdown-item" href="../api_priority_layer/">Priority layer dialog</a>
</li>
<li>
<a class="dropdown-item" href="../api_priority_group/">Priority group</a>
</li>
<li>
<a class="dropdown-item" href="../api_progress_dialog/">Progress dialog</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">About <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../../../../about/ci/">Conservation International</a>
</li>
<li>
<a class="dropdown-item" href="../../../../about/kartoza/">Kartoza</a>
</li>
<li>
<a class="dropdown-item" href="../../../../about/license/">License</a>
</li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" href="../../models/api_report/" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../api_carbon_layer_model/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/kartoza/cplus-plugin/blob/main/docs/src/developer/api/gui/api_gui_main.md">Edit on kartoza/cplus-plugin</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-target="#toc-collapse" data-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-secondary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-level="1"><a class="nav-link" href="#gui-main">GUI main</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="1"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main">qgis_cplus_main</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="1"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain">QgisCplusMain</a>
<ul class="nav flex-column">
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_group">add_priority_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_layer">add_priority_layer()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_layer_group">add_priority_layer_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.analysis_complete">analysis_complete()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.cancel_processing_task">cancel_processing_task()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.edit_priority_group">edit_priority_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.edit_priority_layer">edit_priority_layer()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.group_value_changed">group_value_changed()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.initialize_priority_layers">initialize_priority_layers()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.main_task">main_task()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.move_layer_to_group">move_layer_to_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_extent_changed">on_extent_changed()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_ncs_pathways_reloaded">on_ncs_pathways_reloaded()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_progress_dialog_cancelled">on_progress_dialog_cancelled()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_report_finished">on_report_finished()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_report_running">on_report_running()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_reporting_progress_changed">on_reporting_progress_changed()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_tab_step_changed">on_tab_step_changed()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.open_help">open_help()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.open_settings">open_settings()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.post_analysis">post_analysis()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_extent_box">prepare_extent_box()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_input">prepare_input()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_message_bar">prepare_message_bar()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.priority_groups_update">priority_groups_update()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_group">remove_priority_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_layer">remove_priority_layer()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_layer_group">remove_priority_layer_group()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.report_job_is_for_current_scenario">report_job_is_for_current_scenario()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.reset_reporting_feedback">reset_reporting_feedback()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.restore_scenario">restore_scenario()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.run_analysis">run_analysis()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.run_report">run_report()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.save_scenario">save_scenario()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.scenario_results">scenario_results()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.show_message">show_message()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.style_model_layer">style_model_layer()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.style_models_layer">style_models_layer()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.task_terminated">task_terminated()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.transform_extent">transform_extent()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_message_bar">update_message_bar()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_priority_layers">update_priority_layers()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_progress_bar">update_progress_bar()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_progress_dialog">update_progress_dialog()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_pwl_layers">update_pwl_layers()</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.zoom_pilot_area">zoom_pilot_area()</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="gui-main">GUI main</h1>
<div class="doc doc-object doc-module">
<a id="src.cplus_plugin.gui.qgis_cplus_main"></a>
<div class="doc doc-contents first">
<p>The plugin main window class.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h1 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain">
<span class="doc doc-object-name doc-class-name">QgisCplusMain</span>
</h1>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">QgisCplusMain</span><span class="p">(</span><span class="n">iface</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p class="doc doc-class-bases">
            Bases: <code><span title="qgis.PyQt.QtWidgets.QDockWidget">QDockWidget</span></code>, <code>WidgetUi</code></p>
<p>Main plugin UI class</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">iface</span><span class="p">,</span>
    <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress_dialog</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">task</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">prepare_input</span><span class="p">()</span>

    <span class="c1"># Insert widget for step 2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span> <span class="o">=</span> <span class="n">ImplementationModelContainerWidget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">ncs_reloaded</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_ncs_pathways_reloaded</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">insertTab</span><span class="p">(</span>
        <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">"Step 2"</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_tab_step_changed</span><span class="p">)</span>

    <span class="c1"># Step 3, priority weighting layers initialization</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_widgets</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pwl_item_flags</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">initialize_priority_layers</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">position_feedback</span> <span class="o">=</span> <span class="n">QgsProcessingFeedback</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processing_context</span> <span class="o">=</span> <span class="n">QgsProcessingContext</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">post_analysis</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_group">
<span class="doc doc-object-name doc-function-name">add_priority_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_priority_group</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Adds a new priority group into the plugin, then updates
the priority list to show the new added priority group.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_priority_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds a new priority group into the plugin, then updates</span>
<span class="sd">    the priority list to show the new added priority group.</span>
<span class="sd">    """</span>
    <span class="n">group_dialog</span> <span class="o">=</span> <span class="n">PriorityGroupDialog</span><span class="p">()</span>
    <span class="n">group_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_groups</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_layer">
<span class="doc doc-object-name doc-function-name">add_priority_layer</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_priority_layer</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Adds a new priority layer into the plugin, then updates
the priority list to show the new added priority layer.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_priority_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Adds a new priority layer into the plugin, then updates</span>
<span class="sd">    the priority list to show the new added priority layer.</span>
<span class="sd">    """</span>
    <span class="n">layer_dialog</span> <span class="o">=</span> <span class="n">PriorityLayerDialog</span><span class="p">()</span>
    <span class="n">layer_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_layers</span><span class="p">(</span><span class="n">update_groups</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.add_priority_layer_group">
<span class="doc doc-object-name doc-function-name">add_priority_layer_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_priority_layer_group</span><span class="p">(</span>
    <span class="n">target_group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">priority_layer</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Adds priority layer from the weighting layers into a priority group
If no target_group or priority_layer is passed then the current selected
group or priority layer from their respective list will be used.</p>
<p>Checks if priority layer is already in the target group and if so no
addition is done.</p>
<p>Once the addition is done, the respective priority layer plugin settings
are updated to store the new information.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target_group</code></td>
<td>
<code>dict</code>
</td>
<td>
<div class="doc-md-description">
<p>Priority group where layer will be added to</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
<tr>
<td><code>priority_layer</code></td>
<td>
<code>dict</code>
</td>
<td>
<div class="doc-md-description">
<p>Priority weighting layer to be added</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_priority_layer_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_group</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">priority_layer</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""Adds priority layer from the weighting layers into a priority group</span>
<span class="sd">    If no target_group or priority_layer is passed then the current selected</span>
<span class="sd">    group or priority layer from their respective list will be used.</span>

<span class="sd">    Checks if priority layer is already in the target group and if so no</span>
<span class="sd">    addition is done.</span>

<span class="sd">    Once the addition is done, the respective priority layer plugin settings</span>
<span class="sd">    are updated to store the new information.</span>

<span class="sd">    :param target_group: Priority group where layer will be added to</span>
<span class="sd">    :type target_group: dict</span>

<span class="sd">    :param priority_layer: Priority weighting layer to be added</span>
<span class="sd">    :type priority_layer: dict</span>
<span class="sd">    """</span>
    <span class="n">selected_priority_layers</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">priority_layer</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">selected_priority_layers</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span><span class="n">selected_priority_layers</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">selected_priority_layers</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="k">else</span> <span class="n">selected_priority_layers</span>
    <span class="p">)</span>

    <span class="n">selected_group</span> <span class="o">=</span> <span class="n">target_group</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">selected_priority_layer</span> <span class="ow">in</span> <span class="n">selected_priority_layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">selected_group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">selected_group</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="n">selected_priority_layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">children</span> <span class="o">=</span> <span class="n">selected_group</span><span class="o">.</span><span class="n">takeChildren</span><span class="p">()</span>
            <span class="n">item_found</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">selected_priority_layer</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">children</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">text</span><span class="p">:</span>
                    <span class="n">item_found</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="n">selected_group</span><span class="o">.</span><span class="n">addChildren</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">item_found</span><span class="p">:</span>
                <span class="n">selected_group</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTreeWidgetItem</span><span class="p">(</span><span class="n">selected_group</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
                <span class="n">group_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">itemWidget</span><span class="p">(</span>
                    <span class="n">selected_group</span><span class="p">,</span> <span class="mi">0</span>
                <span class="p">)</span>
                <span class="n">layer_id</span> <span class="o">=</span> <span class="n">selected_priority_layer</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">)</span>

                <span class="n">priority_layer</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_layer</span><span class="p">(</span><span class="n">layer_id</span><span class="p">)</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span>
                    <span class="mi">0</span><span class="p">,</span>
                    <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">,</span>
                    <span class="n">priority_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">USER_DEFINED_ATTRIBUTE</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="n">target_group_name</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">group_widget</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span> <span class="k">if</span> <span class="n">group_widget</span><span class="o">.</span><span class="n">group</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="p">)</span>

                <span class="n">groups</span> <span class="o">=</span> <span class="n">priority_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"groups"</span><span class="p">)</span>
                <span class="n">new_groups</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">group_found</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">target_group_name</span> <span class="o">==</span> <span class="n">group</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]:</span>
                        <span class="n">group_found</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">new_group</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_group_by_name</span><span class="p">(</span>
                            <span class="n">target_group_name</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">new_group</span> <span class="o">=</span> <span class="n">group</span>
                    <span class="n">new_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_group</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">group_found</span><span class="p">:</span>
                    <span class="n">searched_group</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_group_by_name</span><span class="p">(</span>
                        <span class="n">target_group_name</span>
                    <span class="p">)</span>
                    <span class="n">new_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">searched_group</span><span class="p">)</span>

                <span class="n">priority_layer</span><span class="p">[</span><span class="s2">"groups"</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_groups</span>
                <span class="n">settings_manager</span><span class="o">.</span><span class="n">save_priority_layer</span><span class="p">(</span><span class="n">priority_layer</span><span class="p">)</span>

    <span class="c1"># Trigger check to enable/disable PWLs based on current extent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_extent_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">())</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.analysis_complete">
<span class="doc doc-object-name doc-function-name">analysis_complete</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analysis_complete</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Calls the responsible function for handling analysis results outputs</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>task</code></td>
<td>
<code>ScenarioAnalysisTask</code>
</td>
<td>
<div class="doc-md-description">
<p>Analysis task</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>report_manager</code></td>
<td>
<code>ReportManager</code>
</td>
<td>
<div class="doc-md-description">
<p>Report manager used to generate analysis reports</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">analysis_complete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">):</span>
    <span class="sd">"""Calls the responsible function for handling analysis results outputs</span>

<span class="sd">    :param task: Analysis task</span>
<span class="sd">    :type task: ScenarioAnalysisTask</span>

<span class="sd">    :param report_manager: Report manager used to generate analysis reports</span>
<span class="sd">    :type report_manager: ReportManager</span>
<span class="sd">    """</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">scenario_result</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_results</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.cancel_processing_task">
<span class="doc doc-object-name doc-function-name">cancel_processing_task</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cancel_processing_task</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Cancels the current processing task.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">cancel_processing_task</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Cancels the current processing task."""</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.edit_priority_group">
<span class="doc doc-object-name doc-function-name">edit_priority_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">edit_priority_group</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Edits the current selected priority group
and updates the group box list.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">edit_priority_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Edits the current selected priority group</span>
<span class="sd">    and updates the group box list."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Select first the priority group from the groups list."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">group_identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">group_identifier</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Could not fetch the selected priority groups for editing."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_group</span><span class="p">(</span><span class="n">group_identifier</span><span class="p">)</span>
    <span class="n">group_dialog</span> <span class="o">=</span> <span class="n">PriorityGroupDialog</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
    <span class="n">group_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_groups</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.edit_priority_layer">
<span class="doc doc-object-name doc-function-name">edit_priority_layer</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">edit_priority_layer</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Edits the current selected priority layer
and updates the layer box list.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">edit_priority_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Edits the current selected priority layer</span>
<span class="sd">    and updates the layer box list."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Select first the priority weighting layer from the layers list."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">layer_identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">(</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">layer_identifier</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Could not fetch the selected priority layer for editing."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_show_priority_layer_editor</span><span class="p">(</span><span class="n">layer_identifier</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.group_value_changed">
<span class="doc doc-object-name doc-function-name">group_value_changed</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">group_value_changed</span><span class="p">(</span><span class="n">group_name</span><span class="p">,</span> <span class="n">group_value</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot to handle priority group widget changes.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>group_name</code></td>
<td>
<code>str</code>
</td>
<td>
<div class="doc-md-description">
<p>Group name</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>group_value</code></td>
<td>
<code>int</code>
</td>
<td>
<div class="doc-md-description">
<p>Group value</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">group_value_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_name</span><span class="p">,</span> <span class="n">group_value</span><span class="p">):</span>
    <span class="sd">"""Slot to handle priority group widget changes.</span>

<span class="sd">    :param group_name: Group name</span>
<span class="sd">    :type group_name: str</span>

<span class="sd">    :param group_value: Group value</span>
<span class="sd">    :type group_value: int</span>
<span class="sd">    """</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_group_by_name</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span>
    <span class="n">group</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">group_value</span>
    <span class="n">settings_manager</span><span class="o">.</span><span class="n">save_priority_group</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItemCount</span><span class="p">()):</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItem</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">child_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">childCount</span><span class="p">()):</span>
            <span class="n">child</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="n">child_index</span><span class="p">)</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_layer_by_name</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">new_groups</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"groups"</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span> <span class="o">==</span> <span class="n">group_name</span><span class="p">:</span>
                    <span class="n">group</span><span class="p">[</span><span class="s2">"value"</span><span class="p">]</span> <span class="o">=</span> <span class="n">group_value</span>
                <span class="n">new_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
            <span class="n">layer</span><span class="p">[</span><span class="s2">"groups"</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_groups</span>
            <span class="n">settings_manager</span><span class="o">.</span><span class="n">save_priority_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.initialize_priority_layers">
<span class="doc doc-object-name doc-function-name">initialize_priority_layers</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">initialize_priority_layers</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Prepares the priority weighted layers UI with the defaults.</p>
<p>Gets the store priority layers from plugin settings and populates
them into the QListWidget as QListWidgetItems then fetches the
priority groups and adds them to the QTreeWidget as QTreeWidgetItems
with their corresponding priority layers as their child items.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">initialize_priority_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Prepares the priority weighted layers UI with the defaults.</span>

<span class="sd">    Gets the store priority layers from plugin settings and populates</span>
<span class="sd">    them into the QListWidget as QListWidgetItems then fetches the</span>
<span class="sd">    priority groups and adds them to the QTreeWidget as QTreeWidgetItems</span>
<span class="sd">    with their corresponding priority layers as their child items.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_layers</span><span class="p">():</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"uuid"</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pwl_item_flags</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pwl_item_flags</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="n">list_items</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">items_only</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">stored_priority_groups</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_groups</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">stored_priority_groups</span><span class="p">:</span>
        <span class="n">group_widget</span> <span class="o">=</span> <span class="n">PriorityGroupWidget</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">group_widget</span><span class="o">.</span><span class="n">input_value_changed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group_value_changed</span><span class="p">)</span>
        <span class="n">group_widget</span><span class="o">.</span><span class="n">slider_value_changed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">group_value_changed</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_widgets</span><span class="p">[</span><span class="n">group</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">group_widget</span>

        <span class="n">pw_layers</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_layers_by_group</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="s2">"name"</span><span class="p">])</span>

        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTreeWidgetItem</span><span class="p">()</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setSizeHint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">group_widget</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">())</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">,</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"uuid"</span><span class="p">))</span>

        <span class="c1"># Add priority layers into the group as a child items.</span>

        <span class="n">item</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pw_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">pw_layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTreeWidgetItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="n">layer_item</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">))</span>
                <span class="n">layer_item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span>
                    <span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">USER_DEFINED_ATTRIBUTE</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="n">list_items</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="n">group_widget</span><span class="p">))</span>
        <span class="n">items_only</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">addTopLevelItems</span><span class="p">(</span><span class="n">items_only</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">list_items</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setItemWidget</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="c1"># Trigger process to enable/disable PWLs based on current extents</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_extent_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">())</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.main_task">
<span class="doc doc-object-name doc-function-name">main_task</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">main_task</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Serves as a QgsTask function for the main task that contains
smaller sub-tasks running the actual processing calculations.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">main_task</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Serves as a QgsTask function for the main task that contains</span>
<span class="sd">    smaller sub-tasks running the actual processing calculations.</span>
<span class="sd">    """</span>

    <span class="n">log</span><span class="p">(</span><span class="s2">"Running from main task."</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.move_layer_to_group">
<span class="doc doc-object-name doc-function-name">move_layer_to_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">move_layer_to_group</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Moves a layer open in QGIS to another group.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer</code></td>
<td>
<code>QgsRasterLayer</code>
</td>
<td>
<div class="doc-md-description">
<p>Raster layer to move</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>group</code></td>
<td>
<code>QgsLayerTreeGroup</code>
</td>
<td>
<div class="doc-md-description">
<p>Group to which the raster should be moved</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">move_layer_to_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""Moves a layer open in QGIS to another group.</span>

<span class="sd">    :param layer: Raster layer to move</span>
<span class="sd">    :type layer: QgsRasterLayer</span>

<span class="sd">    :param group: Group to which the raster should be moved</span>
<span class="sd">    :type group: QgsLayerTreeGroup</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">layer</span><span class="p">:</span>
        <span class="n">instance_root</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">instance_root</span><span class="o">.</span><span class="n">findLayer</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">id</span><span class="p">())</span>
        <span class="n">layer_clone</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
        <span class="n">group</span><span class="o">.</span><span class="n">insertChildNode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">layer_clone</span><span class="p">)</span>  <span class="c1"># Add to top of group</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">removeChildNode</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_extent_changed">
<span class="doc doc-object-name doc-function-name">on_extent_changed</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_extent_changed</span><span class="p">(</span><span class="n">new_extent</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when scenario extents have changed.</p>
<p>Used to enable/disable default model items if they are within or
outside the pilot AOI.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_extent_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_extent</span><span class="p">:</span> <span class="n">QgsRectangle</span><span class="p">):</span>
    <span class="sd">"""Slot raised when scenario extents have changed.</span>

<span class="sd">    Used to enable/disable default model items if they are within or</span>
<span class="sd">    outside the pilot AOI.</span>
<span class="sd">    """</span>
    <span class="n">within_pilot_area</span> <span class="o">=</span> <span class="n">extent_within_pilot</span><span class="p">(</span><span class="n">new_extent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputCrs</span><span class="p">())</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">within_pilot_area</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">tr</span><span class="p">(</span>
            <span class="s2">"Area of interest is outside the pilot area. Please use your "</span>
            <span class="s2">"own NCS pathways, implementation models and PWLs."</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">clearWidgets</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">enable_default_items</span><span class="p">(</span><span class="n">within_pilot_area</span><span class="p">)</span>

    <span class="c1"># Enable/disable PWL items</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
        <span class="n">pwl_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">uuid_str</span> <span class="o">=</span> <span class="n">pwl_item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">uuid_str</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">pwl_uuid</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="n">uuid_str</span><span class="p">)</span>
        <span class="n">pwl</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_layer</span><span class="p">(</span><span class="n">pwl_uuid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">USER_DEFINED_ATTRIBUTE</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pwl</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">is_user_defined</span> <span class="o">=</span> <span class="n">pwl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">USER_DEFINED_ATTRIBUTE</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_user_defined</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">within_pilot_area</span><span class="p">:</span>
            <span class="n">pwl_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pwl_item_flags</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pwl_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoItemFlags</span><span class="p">)</span>

    <span class="c1"># Enable/disable PWL items already defined under the priority groups</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItemCount</span><span class="p">()):</span>
        <span class="n">group_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">group_item</span><span class="o">.</span><span class="n">childCount</span><span class="p">()):</span>
            <span class="n">pwl_tree_item</span> <span class="o">=</span> <span class="n">group_item</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">is_user_defined</span> <span class="o">=</span> <span class="n">pwl_tree_item</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_user_defined</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">within_pilot_area</span><span class="p">:</span>
                <span class="n">pwl_tree_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pwl_item_flags</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pwl_tree_item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoItemFlags</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_ncs_pathways_reloaded">
<span class="doc doc-object-name doc-function-name">on_ncs_pathways_reloaded</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_ncs_pathways_reloaded</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when NCS pathways have been reloaded in the view.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_ncs_pathways_reloaded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Slot raised when NCS pathways have been reloaded in the view."""</span>
    <span class="n">within_pilot_area</span> <span class="o">=</span> <span class="n">extent_within_pilot</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputCrs</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">enable_default_items</span><span class="p">(</span><span class="n">within_pilot_area</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_progress_dialog_cancelled">
<span class="doc doc-object-name doc-function-name">on_progress_dialog_cancelled</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_progress_dialog_cancelled</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when analysis has been cancelled in progress dialog.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1588</span>
<span class="normal">1589</span>
<span class="normal">1590</span>
<span class="normal">1591</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_progress_dialog_cancelled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Slot raised when analysis has been cancelled in progress dialog."""</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_scenario_btn</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_scenario_btn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_report_finished">
<span class="doc doc-object-name doc-function-name">on_report_finished</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_report_finished</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">scenario_id</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when report task has finished.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>scenario_id</code></td>
<td>
<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Scenario analysis id</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span>
<span class="normal">1548</span>
<span class="normal">1549</span>
<span class="normal">1550</span>
<span class="normal">1551</span>
<span class="normal">1552</span>
<span class="normal">1553</span>
<span class="normal">1554</span>
<span class="normal">1555</span>
<span class="normal">1556</span>
<span class="normal">1557</span>
<span class="normal">1558</span>
<span class="normal">1559</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_report_finished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">,</span> <span class="n">scenario_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">"""Slot raised when report task has finished.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param scenario_id: Scenario analysis id</span>
<span class="sd">    :type scenario_id: str</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_job_is_for_current_scenario</span><span class="p">(</span><span class="n">scenario_id</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">set_report_complete</span><span class="p">()</span>
    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">change_status_message</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">"Report generation complete"</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">run_scenario_btn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_report_running">
<span class="doc doc-object-name doc-function-name">on_report_running</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_report_running</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">scenario_id</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when report task has started.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>scenario_id</code></td>
<td>
<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Scenario analysis id</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_report_running</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">,</span> <span class="n">scenario_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">"""Slot raised when report task has started.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param scenario_id: Scenario analysis id</span>
<span class="sd">    :type scenario_id: str</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">report_job_is_for_current_scenario</span><span class="p">(</span><span class="n">scenario_id</span><span class="p">):</span>
        <span class="k">return</span>

    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">update_progress_bar</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">report_running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">change_status_message</span><span class="p">(</span>
        <span class="n">tr</span><span class="p">(</span><span class="s2">"Generating report for the analysis output"</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_reporting_progress_changed">
<span class="doc doc-object-name doc-function-name">on_reporting_progress_changed</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_reporting_progress_changed</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">progress</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when the reporting progress has changed.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>progress</code></td>
<td>
<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Analysis progress value between 0 and 100</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_reporting_progress_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
    <span class="sd">"""Slot raised when the reporting progress has changed.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param progress: Analysis progress value between 0 and 100</span>
<span class="sd">    :type progress: float</span>
<span class="sd">    """</span>
    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">update_progress_bar</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.on_tab_step_changed">
<span class="doc doc-object-name doc-function-name">on_tab_step_changed</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_tab_step_changed</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Slot raised when the current tab changes.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>index</code></td>
<td>
<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Zero-based index position of new current tab</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_tab_step_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">"""Slot raised when the current tab changes.</span>

<span class="sd">    :param index: Zero-based index position of new current tab</span>
<span class="sd">    :type index: int</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">can_show_error_messages</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

    <span class="k">elif</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c1"># Validate implementation model selection</span>
        <span class="n">selected_implementation_models</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">selected_im_items</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_implementation_models</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">"Please select at least one implementation model."</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tab_widget</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">clearWidgets</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.open_help">
<span class="doc doc-object-name doc-function-name">open_help</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">open_help</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Opens the user documentation for the plugin in a browser</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_help</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Opens the user documentation for the plugin in a browser"""</span>
    <span class="n">open_documentation</span><span class="p">(</span><span class="n">USER_DOCUMENTATION_SITE</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.open_settings">
<span class="doc doc-object-name doc-function-name">open_settings</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">open_settings</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Options the CPLUS settings in the QGIS options dialog.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">open_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Options the CPLUS settings in the QGIS options dialog."""</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">showOptionsDialog</span><span class="p">(</span><span class="n">currentPage</span><span class="o">=</span><span class="n">OPTIONS_TITLE</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.post_analysis">
<span class="doc doc-object-name doc-function-name">post_analysis</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">post_analysis</span><span class="p">(</span><span class="n">scenario_result</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Handles analysis outputs from the final analysis results.
Adds the resulting scenario raster to the canvas with styling.
Adds each of the implementation models to the canvas with styling.
Adds each IMs pathways to the canvas.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scenario_result</code></td>
<td>
<code>ScenarioResult</code>
</td>
<td>
<div class="doc-md-description">
<p>ScenarioResult of output results</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>task</code></td>
<td>
<code>ScenarioAnalysisTask</code>
</td>
<td>
<div class="doc-md-description">
<p>Analysis task</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>report_manager</code></td>
<td>
<code>ReportManager</code>
</td>
<td>
<div class="doc-md-description">
<p>Report manager used to generate analysis reports</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">post_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_result</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">):</span>
    <span class="sd">"""Handles analysis outputs from the final analysis results.</span>
<span class="sd">    Adds the resulting scenario raster to the canvas with styling.</span>
<span class="sd">    Adds each of the implementation models to the canvas with styling.</span>
<span class="sd">    Adds each IMs pathways to the canvas.</span>

<span class="sd">    :param scenario_result: ScenarioResult of output results</span>
<span class="sd">    :type scenario_result: ScenarioResult</span>

<span class="sd">    :param task: Analysis task</span>
<span class="sd">    :type task: ScenarioAnalysisTask</span>

<span class="sd">    :param report_manager: Report manager used to generate analysis reports</span>
<span class="sd">    :type report_manager: ReportManager</span>
<span class="sd">    """</span>

    <span class="c1"># If the processing were stopped, no file will be added</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span><span class="p">:</span>
        <span class="n">list_models</span> <span class="o">=</span> <span class="n">scenario_result</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">models</span>
        <span class="n">raster</span> <span class="o">=</span> <span class="n">scenario_result</span><span class="o">.</span><span class="n">analysis_output</span><span class="p">[</span><span class="s2">"OUTPUT"</span><span class="p">]</span>
        <span class="n">im_weighted_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">raster</span><span class="p">),</span> <span class="s2">"weighted_ims"</span><span class="p">)</span>

        <span class="n">scenario_name</span> <span class="o">=</span> <span class="n">scenario_result</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">name</span>
        <span class="n">qgis_instance</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="n">instance_root</span> <span class="o">=</span> <span class="n">qgis_instance</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span>

        <span class="c1"># Check if there are other groups for the scenario</span>
        <span class="c1"># and assign a suffix.</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">group_name</span> <span class="o">=</span> <span class="n">scenario_name</span>

        <span class="c1"># Control to prevent infinite loop</span>
        <span class="n">max_limit</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">while</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">counter</span> <span class="o">&lt;=</span> <span class="n">max_limit</span><span class="p">:</span>
            <span class="n">scenario_grp</span> <span class="o">=</span> <span class="n">instance_root</span><span class="o">.</span><span class="n">findGroup</span><span class="p">(</span><span class="n">group_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">scenario_grp</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">group_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">counter</span><span class="si">!s}</span><span class="s2">"</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Groups</span>
        <span class="n">scenario_group</span> <span class="o">=</span> <span class="n">instance_root</span><span class="o">.</span><span class="n">insertGroup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">group_name</span><span class="p">)</span>
        <span class="n">im_group</span> <span class="o">=</span> <span class="n">scenario_group</span><span class="o">.</span><span class="n">addGroup</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="n">IM_GROUP_LAYER_NAME</span><span class="p">))</span>
        <span class="n">im_weighted_group</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">scenario_group</span><span class="o">.</span><span class="n">addGroup</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="n">IM_WEIGHTED_GROUP_NAME</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">im_weighted_dir</span><span class="p">)</span>
            <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">pathways_group</span> <span class="o">=</span> <span class="n">scenario_group</span><span class="o">.</span><span class="n">addGroup</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="n">NCS_PATHWAYS_GROUP_LAYER_NAME</span><span class="p">))</span>

        <span class="c1"># Group settings</span>
        <span class="n">im_group</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">im_weighted_group</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span> <span class="k">if</span> <span class="n">im_weighted_group</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">pathways_group</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">pathways_group</span><span class="o">.</span><span class="n">setItemVisibilityCheckedRecursive</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># Add scenario result layer to the canvas with styling</span>
        <span class="n">layer_file</span> <span class="o">=</span> <span class="n">scenario_result</span><span class="o">.</span><span class="n">analysis_output</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"OUTPUT"</span><span class="p">)</span>
        <span class="n">layer_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">SCENARIO_OUTPUT_LAYER_NAME</span><span class="si">}</span><span class="s2">_"</span>
            <span class="sa">f</span><span class="s1">'</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">"%Y_%m_</span><span class="si">%d</span><span class="s2">_%H_%M_%S"</span><span class="p">)</span><span class="si">}</span><span class="s1">'</span>
        <span class="p">)</span>
        <span class="n">scenario_result</span><span class="o">.</span><span class="n">output_layer_name</span> <span class="o">=</span> <span class="n">layer_name</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">QgsRasterLayer</span><span class="p">(</span><span class="n">layer_file</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="n">QGIS_GDAL_PROVIDER</span><span class="p">)</span>
        <span class="n">scenario_layer</span> <span class="o">=</span> <span class="n">qgis_instance</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

        <span class="c1"># Scenario result layer styling</span>
        <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_models_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_weighted_ims</span><span class="p">)</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">setRenderer</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">triggerRepaint</span><span class="p">()</span>

        <span class="sd">"""A workaround to add a layer to a group.</span>
<span class="sd">        Adding it using group.insertChildNode or group.addLayer causes issues,</span>
<span class="sd">        but adding to the root is fine.</span>
<span class="sd">        This approach adds it to the root, and then moves it to the group.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move_layer_to_group</span><span class="p">(</span><span class="n">scenario_layer</span><span class="p">,</span> <span class="n">scenario_group</span><span class="p">)</span>

        <span class="c1"># Add implementation models and pathways</span>
        <span class="n">im_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">im</span> <span class="ow">in</span> <span class="n">list_models</span><span class="p">:</span>
            <span class="n">im_name</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">name</span>
            <span class="n">im_layer</span> <span class="o">=</span> <span class="n">QgsRasterLayer</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">im</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">im_layer</span><span class="o">.</span><span class="n">setCustomProperty</span><span class="p">(</span><span class="n">MODEL_IDENTIFIER_PROPERTY</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">uuid</span><span class="p">))</span>
            <span class="n">list_pathways</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">pathways</span>

            <span class="c1"># Add IM layer with styling, if available</span>
            <span class="k">if</span> <span class="n">im_layer</span><span class="p">:</span>
                <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_model_layer</span><span class="p">(</span><span class="n">im_layer</span><span class="p">,</span> <span class="n">im</span><span class="p">)</span>

                <span class="n">added_im_layer</span> <span class="o">=</span> <span class="n">qgis_instance</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">im_layer</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">move_layer_to_group</span><span class="p">(</span><span class="n">added_im_layer</span><span class="p">,</span> <span class="n">im_group</span><span class="p">)</span>

                <span class="n">im_layer</span><span class="o">.</span><span class="n">setRenderer</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
                <span class="n">im_layer</span><span class="o">.</span><span class="n">triggerRepaint</span><span class="p">()</span>

            <span class="c1"># Add IM pathways</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_pathways</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># im_pathway_group = pathways_group.addGroup(im_name)</span>
                <span class="n">im_pathway_group</span> <span class="o">=</span> <span class="n">pathways_group</span><span class="o">.</span><span class="n">insertGroup</span><span class="p">(</span><span class="n">im_index</span><span class="p">,</span> <span class="n">im_name</span><span class="p">)</span>
                <span class="n">im_pathway_group</span><span class="o">.</span><span class="n">setExpanded</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

                <span class="n">pw_index</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">pathway</span> <span class="ow">in</span> <span class="n">list_pathways</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># pathway_name = pathway.name</span>
                        <span class="n">pathway_layer</span> <span class="o">=</span> <span class="n">pathway</span><span class="o">.</span><span class="n">to_map_layer</span><span class="p">()</span>

                        <span class="n">added_pw_layer</span> <span class="o">=</span> <span class="n">qgis_instance</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">pathway_layer</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">move_layer_to_group</span><span class="p">(</span><span class="n">added_pw_layer</span><span class="p">,</span> <span class="n">im_pathway_group</span><span class="p">)</span>

                        <span class="n">pathway_layer</span><span class="o">.</span><span class="n">triggerRepaint</span><span class="p">()</span>

                        <span class="n">pw_index</span> <span class="o">=</span> <span class="n">pw_index</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
                            <span class="n">tr</span><span class="p">(</span>
                                <span class="s2">"An error occurred loading a pathway, "</span>
                                <span class="s2">"check logs for more information"</span>
                            <span class="p">),</span>
                            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="n">log</span><span class="p">(</span>
                            <span class="n">tr</span><span class="p">(</span>
                                <span class="s2">"An error occurred loading a pathway, "</span>
                                <span class="s1">'scenario analysis, error message "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                            <span class="p">)</span>
                        <span class="p">)</span>

            <span class="n">im_index</span> <span class="o">=</span> <span class="n">im_index</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">weighted_ims</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">analysis_weighted_ims</span> <span class="k">if</span> <span class="n">task</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">weighted_ims</span><span class="p">:</span>
            <span class="n">weighted_im_path</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">path</span>
            <span class="n">weighted_im_name</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">weighted_im_path</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">weighted_im_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">".tif"</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">im_weighted_layer</span> <span class="o">=</span> <span class="n">QgsRasterLayer</span><span class="p">(</span>
                <span class="n">weighted_im_path</span><span class="p">,</span> <span class="n">weighted_im_name</span><span class="p">,</span> <span class="n">QGIS_GDAL_PROVIDER</span>
            <span class="p">)</span>

            <span class="c1"># Set UUID for easier retrieval</span>
            <span class="n">im_weighted_layer</span><span class="o">.</span><span class="n">setCustomProperty</span><span class="p">(</span>
                <span class="n">MODEL_IDENTIFIER_PROPERTY</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="n">renderer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style_model_layer</span><span class="p">(</span><span class="n">im_weighted_layer</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
            <span class="n">im_weighted_layer</span><span class="o">.</span><span class="n">setRenderer</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
            <span class="n">im_weighted_layer</span><span class="o">.</span><span class="n">triggerRepaint</span><span class="p">()</span>

            <span class="n">added_im_weighted_layer</span> <span class="o">=</span> <span class="n">qgis_instance</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">im_weighted_layer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_layer_to_group</span><span class="p">(</span><span class="n">added_im_weighted_layer</span><span class="p">,</span> <span class="n">im_weighted_group</span><span class="p">)</span>

        <span class="c1"># Initiate report generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_report</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Reinitializes variables if processing were cancelled by the user</span>
        <span class="c1"># Not doing this breaks the processing if a user tries to run</span>
        <span class="c1"># the processing after cancelling or if the processing fails</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position_feedback</span> <span class="o">=</span> <span class="n">QgsProcessingFeedback</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processing_context</span> <span class="o">=</span> <span class="n">QgsProcessingContext</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_extent_box">
<span class="doc doc-object-name doc-function-name">prepare_extent_box</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">prepare_extent_box</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Configure the spatial extent box with the initial settings.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_extent_box</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Configure the spatial extent box with the initial settings."""</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setOutputCrs</span><span class="p">(</span><span class="n">QgsCoordinateReferenceSystem</span><span class="p">(</span><span class="s2">"EPSG:4326"</span><span class="p">))</span>
    <span class="n">map_canvas</span> <span class="o">=</span> <span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setCurrentExtent</span><span class="p">(</span>
        <span class="n">map_canvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span><span class="o">.</span><span class="n">bounds</span><span class="p">(),</span>
        <span class="n">map_canvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">(),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setOutputExtentFromCurrent</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setMapCanvas</span><span class="p">(</span><span class="n">map_canvas</span><span class="p">)</span>

    <span class="n">extent_list</span> <span class="o">=</span> <span class="n">PILOT_AREA_EXTENT</span><span class="p">[</span><span class="s2">"coordinates"</span><span class="p">]</span>
    <span class="n">default_extent</span> <span class="o">=</span> <span class="n">QgsRectangle</span><span class="p">(</span>
        <span class="n">extent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setOutputExtentFromUser</span><span class="p">(</span>
        <span class="n">default_extent</span><span class="p">,</span>
        <span class="n">QgsCoordinateReferenceSystem</span><span class="p">(</span><span class="s2">"EPSG:4326"</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_input">
<span class="doc doc-object-name doc-function-name">prepare_input</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">prepare_input</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Initializes plugin input widgets</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Initializes plugin input widgets"""</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prepare_extent_box</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid_layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QGridLayout</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span> <span class="o">=</span> <span class="n">QgsMessageBar</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prepare_message_bar</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">progress_dialog</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_directory</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">help_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_help</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pilot_area_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_pilot_area</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">run_scenario_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_analysis</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">options_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_settings</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">restore_scenario</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_scenario</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_scenario</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">extentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_scenario</span><span class="p">)</span>

    <span class="c1"># Monitors if current extents are within the pilot AOI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">extentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_extent_changed</span><span class="p">)</span>

    <span class="n">icon_pixmap</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">ICON_PATH</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">icon_la</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">icon_pixmap</span><span class="p">)</span>

    <span class="n">add_layer_icon</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="n">ADD_LAYER_ICON_PATH</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_add_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">add_layer_icon</span><span class="p">)</span>

    <span class="n">remove_layer_icon</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="n">REMOVE_LAYER_ICON_PATH</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_remove_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">remove_layer_icon</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">layer_add_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_priority_layer_group</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_remove_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_priority_layer_group</span><span class="p">)</span>

    <span class="c1"># Priority groups buttons</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_group_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"symbologyAdd.svg"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edit_group_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"mActionToggleEditing.svg"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_group_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"symbologyRemove.svg"</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_group_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_priority_group</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edit_group_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_priority_group</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_group_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_priority_group</span><span class="p">)</span>

    <span class="c1"># Priority layers buttons</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_pwl_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"symbologyAdd.svg"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edit_pwl_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"mActionToggleEditing.svg"</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_pwl_btn</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">FileUtils</span><span class="o">.</span><span class="n">get_icon</span><span class="p">(</span><span class="s2">"symbologyRemove.svg"</span><span class="p">))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_pwl_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_priority_layer</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">edit_pwl_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_priority_layer</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_pwl_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_priority_layer</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">itemDoubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on_double_click_priority_layer</span>
    <span class="p">)</span>

    <span class="c1"># Add priority groups list into the groups frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span> <span class="o">=</span> <span class="n">CustomTreeWidget</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setHeaderHidden</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setDragEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setDragDropOverwriteMode</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">viewport</span><span class="p">()</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setDragDropMode</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">DropOnly</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">child_dragged_dropped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_update</span>
    <span class="p">)</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_frame</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

    <span class="c1"># Scenario analysis variables</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_extent</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_weighted_ims</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_priority_layers_groups</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.prepare_message_bar">
<span class="doc doc-object-name doc-function-name">prepare_message_bar</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">prepare_message_bar</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Initializes the widget message bar settings</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">prepare_message_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Initializes the widget message bar settings"""</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Fixed</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">alignment</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dock_widget_contents</span><span class="o">.</span><span class="n">layout</span><span class="p">()</span><span class="o">.</span><span class="n">insertLayout</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_layout</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.priority_groups_update">
<span class="doc doc-object-name doc-function-name">priority_groups_update</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">priority_groups_update</span><span class="p">(</span><span class="n">target_item</span><span class="p">,</span> <span class="n">selected_items</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Updates the priority groups list item with the passed
 selected layer items.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target_item</code></td>
<td>
<code>QTreeWidgetItem</code>
</td>
<td>
<div class="doc-md-description">
<p>The priority group tree widget item that is to be updated</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>selected_items</code></td>
<td>
<code>list</code>
</td>
<td>
<div class="doc-md-description">
<p>Priority layers items from the list widget</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">priority_groups_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target_item</span><span class="p">,</span> <span class="n">selected_items</span><span class="p">):</span>
    <span class="sd">"""Updates the priority groups list item with the passed</span>
<span class="sd">     selected layer items.</span>

<span class="sd">    :param target_item: The priority group tree widget</span>
<span class="sd">     item that is to be updated</span>
<span class="sd">    :type target_item: QTreeWidgetItem</span>

<span class="sd">    :param selected_items: Priority layers items from the list widget</span>
<span class="sd">    :type selected_items: list</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">setCurrentItem</span><span class="p">(</span><span class="n">target_item</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">selected_items</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_priority_layer_group</span><span class="p">(</span><span class="n">target_item</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_group">
<span class="doc doc-object-name doc-function-name">remove_priority_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">remove_priority_group</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Removes the current active priority group.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_priority_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Removes the current active priority group."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Select first the priority group from the groups list"</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="n">group_identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_group</span><span class="p">(</span><span class="n">group_identifier</span><span class="p">)</span>
    <span class="n">current_text</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">group_identifier</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">group_identifier</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Could not fetch the selected priority group for editing."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">reply</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tr</span><span class="p">(</span><span class="s2">"QGIS CPLUS PLUGIN"</span><span class="p">),</span>
        <span class="n">tr</span><span class="p">(</span><span class="s1">'Remove the priority group "</span><span class="si">{}</span><span class="s1">"?'</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">current_text</span><span class="p">),</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
        <span class="n">settings_manager</span><span class="o">.</span><span class="n">delete_priority_group</span><span class="p">(</span><span class="n">group_identifier</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_groups</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_layer">
<span class="doc doc-object-name doc-function-name">remove_priority_layer</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">remove_priority_layer</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Removes the current active priority layer.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_priority_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Removes the current active priority layer."""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span>
                <span class="s2">"Select first the priority "</span> <span class="s2">"weighting layer from the layers list."</span>
            <span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="n">current_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">(</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">current_text</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Could not fetch the selected priority layer for editing."</span><span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_layer_by_name</span><span class="p">(</span><span class="n">current_text</span><span class="p">)</span>
    <span class="n">reply</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tr</span><span class="p">(</span><span class="s2">"QGIS CPLUS PLUGIN"</span><span class="p">),</span>
        <span class="n">tr</span><span class="p">(</span><span class="s1">'Remove the priority layer "</span><span class="si">{}</span><span class="s1">"?'</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">current_text</span><span class="p">),</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">,</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
        <span class="n">settings_manager</span><span class="o">.</span><span class="n">delete_priority_layer</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"uuid"</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_layers</span><span class="p">(</span><span class="n">update_groups</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.remove_priority_layer_group">
<span class="doc doc-object-name doc-function-name">remove_priority_layer_group</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">remove_priority_layer_group</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Remove the current select priority layer from the current priority group.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_priority_layer_group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Remove the current select priority layer from the current priority group."""</span>
    <span class="n">selected_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span>
    <span class="n">parent_item</span> <span class="o">=</span> <span class="n">selected_group</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="k">if</span> <span class="n">selected_group</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">parent_item</span><span class="p">:</span>
        <span class="n">priority_layer</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">find_layer_by_name</span><span class="p">(</span><span class="n">selected_group</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">group_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">itemWidget</span><span class="p">(</span><span class="n">parent_item</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">groups</span> <span class="o">=</span> <span class="n">priority_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"groups"</span><span class="p">)</span>
        <span class="n">new_groups</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span> <span class="o">==</span> <span class="n">group_widget</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">new_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
        <span class="n">priority_layer</span><span class="p">[</span><span class="s2">"groups"</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_groups</span>
        <span class="n">settings_manager</span><span class="o">.</span><span class="n">save_priority_layer</span><span class="p">(</span><span class="n">priority_layer</span><span class="p">)</span>

        <span class="n">parent_item</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">selected_group</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.report_job_is_for_current_scenario">
<span class="doc doc-object-name doc-function-name">report_job_is_for_current_scenario</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">report_job_is_for_current_scenario</span><span class="p">(</span><span class="n">scenario_id</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Checks if the given scenario identifier is for the current
scenario result.</p>
<p>This is to ensure that signals raised by the report manager refer
to the current scenario result object and not for old jobs.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scenario_id</code></td>
<td>
<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
</td>
<td>
<div class="doc-md-description">
<p>Scenario identifier usually from a signal raised by the report manager.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>bool</code>
</td>
<td>
<div class="doc-md-description">
<p>True if the scenario identifier matches the current scenario object in the results, else False.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1561</span>
<span class="normal">1562</span>
<span class="normal">1563</span>
<span class="normal">1564</span>
<span class="normal">1565</span>
<span class="normal">1566</span>
<span class="normal">1567</span>
<span class="normal">1568</span>
<span class="normal">1569</span>
<span class="normal">1570</span>
<span class="normal">1571</span>
<span class="normal">1572</span>
<span class="normal">1573</span>
<span class="normal">1574</span>
<span class="normal">1575</span>
<span class="normal">1576</span>
<span class="normal">1577</span>
<span class="normal">1578</span>
<span class="normal">1579</span>
<span class="normal">1580</span>
<span class="normal">1581</span>
<span class="normal">1582</span>
<span class="normal">1583</span>
<span class="normal">1584</span>
<span class="normal">1585</span>
<span class="normal">1586</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">report_job_is_for_current_scenario</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""Checks if the given scenario identifier is for the current</span>
<span class="sd">    scenario result.</span>

<span class="sd">    This is to ensure that signals raised by the report manager refer</span>
<span class="sd">    to the current scenario result object and not for old jobs.</span>

<span class="sd">    :param scenario_id: Scenario identifier usually from a signal</span>
<span class="sd">    raised by the report manager.</span>
<span class="sd">    :type scenario_id: str</span>

<span class="sd">    :returns: True if the scenario identifier matches the current</span>
<span class="sd">    scenario object in the results, else False.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">current_scenario</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="o">.</span><span class="n">scenario</span>
    <span class="k">if</span> <span class="n">current_scenario</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_scenario</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span> <span class="o">==</span> <span class="n">scenario_id</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.reset_reporting_feedback">
<span class="doc doc-object-name doc-function-name">reset_reporting_feedback</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">reset_reporting_feedback</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Creates a new reporting feedback object and reconnects
the signals.</p>
<p>We are doing this to address cases where the feedback is canceled
and the same object has to be reused for subsequent report
generation tasks.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>QgsFeedback</code>
</td>
<td>
<div class="doc-md-description">
<p>Feedback instance to be used in storing processing status details.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">reset_reporting_feedback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">):</span>
    <span class="sd">"""Creates a new reporting feedback object and reconnects</span>
<span class="sd">    the signals.</span>

<span class="sd">    We are doing this to address cases where the feedback is canceled</span>
<span class="sd">    and the same object has to be reused for subsequent report</span>
<span class="sd">    generation tasks.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :returns reporting_feedback: Feedback instance to be used in storing</span>
<span class="sd">    processing status details.</span>
<span class="sd">    :rtype reporting_feedback: QgsFeedback</span>

<span class="sd">    """</span>

    <span class="n">progress_changed</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_reporting_progress_changed</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">)</span>

    <span class="n">reporting_feedback</span> <span class="o">=</span> <span class="n">QgsFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">reporting_feedback</span><span class="o">.</span><span class="n">progressChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">progress_changed</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">reporting_feedback</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.restore_scenario">
<span class="doc doc-object-name doc-function-name">restore_scenario</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">restore_scenario</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Update the first tab input with the last scenario details</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">restore_scenario</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Update the first tab input with the last scenario details"""</span>
    <span class="n">scenario_name</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_NAME</span><span class="p">)</span>
    <span class="n">scenario_description</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_DESCRIPTION</span><span class="p">)</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_EXTENT</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">)</span> <span class="k">if</span> <span class="n">scenario_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span>
        <span class="n">scenario_description</span>
    <span class="p">)</span> <span class="k">if</span> <span class="n">scenario_description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">extent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">extent_rectangle</span> <span class="o">=</span> <span class="n">QgsRectangle</span><span class="p">(</span>
            <span class="nb">float</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">setOutputExtentFromUser</span><span class="p">(</span>
            <span class="n">extent_rectangle</span><span class="p">,</span>
            <span class="n">QgsCoordinateReferenceSystem</span><span class="p">(</span><span class="s2">"EPSG:4326"</span><span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.run_analysis">
<span class="doc doc-object-name doc-function-name">run_analysis</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">run_analysis</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Runs the plugin analysis
Creates new QgsTask, progress dialog and report manager
 for each new scenario analysis.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Runs the plugin analysis</span>
<span class="sd">    Creates new QgsTask, progress dialog and report manager</span>
<span class="sd">     for each new scenario analysis.</span>
<span class="sd">    """</span>

    <span class="n">extent_list</span> <span class="o">=</span> <span class="n">PILOT_AREA_EXTENT</span><span class="p">[</span><span class="s2">"coordinates"</span><span class="p">]</span>
    <span class="n">default_extent</span> <span class="o">=</span> <span class="n">QgsRectangle</span><span class="p">(</span>
        <span class="n">extent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">passed_extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">()</span>
    <span class="n">contains</span> <span class="o">=</span> <span class="n">default_extent</span> <span class="o">==</span> <span class="n">passed_extent</span> <span class="ow">or</span> <span class="n">default_extent</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span>
        <span class="n">passed_extent</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">position_feedback</span> <span class="o">=</span> <span class="n">QgsProcessingFeedback</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">processing_context</span> <span class="o">=</span> <span class="n">QgsProcessingContext</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_groups</span><span class="p">():</span>
        <span class="n">group_layer_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">),</span>
            <span class="s2">"value"</span><span class="p">:</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"value"</span><span class="p">),</span>
            <span class="s2">"layers"</span><span class="p">:</span> <span class="p">[],</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_layers</span><span class="p">():</span>
            <span class="n">pwl_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">findItems</span><span class="p">(</span>
                <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">),</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchExactly</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pwl_items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Exclude adding the PWL since its for a disabled default</span>
                <span class="c1"># item outside the pilot AOI.</span>
                <span class="k">if</span> <span class="n">pwl_items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoItemFlags</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="n">group_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"groups"</span><span class="p">,</span> <span class="p">[])]</span>
            <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">)</span> <span class="ow">in</span> <span class="n">group_names</span><span class="p">:</span>
                <span class="n">group_layer_dict</span><span class="p">[</span><span class="s2">"layers"</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_priority_layers_groups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">group_layer_dict</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">item</span><span class="o">.</span><span class="n">implementation_model</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">implementation_model_widget</span><span class="o">.</span><span class="n">selected_im_items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_weighted_ims</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span> <span class="o">==</span> <span class="s2">""</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Scenario name cannot be blank."</span><span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span> <span class="o">==</span> <span class="s2">""</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Scenario description cannot be blank."</span><span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span> <span class="o">==</span> <span class="p">[]</span>
        <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Select at least one implementation models from step two."</span><span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Critical</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">contains</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Selected area of interest is outside the pilot area."</span><span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">default_ext</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">default_extent</span><span class="o">.</span><span class="n">xMinimum</span><span class="p">()</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">default_extent</span><span class="o">.</span><span class="n">xMaximum</span><span class="p">()</span><span class="si">}</span><span class="s2">,"</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">default_extent</span><span class="o">.</span><span class="n">yMinimum</span><span class="p">()</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">default_extent</span><span class="o">.</span><span class="n">yMaximum</span><span class="p">()</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">)</span>
        <span class="n">log</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">"Outside the pilot area, passed extent "</span>
            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">passed_extent</span><span class="si">}</span><span class="s2">"</span>
            <span class="sa">f</span><span class="s2">"default extent</span><span class="si">{</span><span class="n">default_ext</span><span class="si">}</span><span class="s2">"</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">base_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"Plugin base data directory is not set! "</span>
                <span class="sa">f</span><span class="s2">"Go to plugin settings in order to set it."</span>
            <span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Critial</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">analysis_extent</span> <span class="o">=</span> <span class="n">SpatialExtent</span><span class="p">(</span>
        <span class="n">bbox</span><span class="o">=</span><span class="p">[</span>
            <span class="n">passed_extent</span><span class="o">.</span><span class="n">xMinimum</span><span class="p">(),</span>
            <span class="n">passed_extent</span><span class="o">.</span><span class="n">xMaximum</span><span class="p">(),</span>
            <span class="n">passed_extent</span><span class="o">.</span><span class="n">yMinimum</span><span class="p">(),</span>
            <span class="n">passed_extent</span><span class="o">.</span><span class="n">yMaximum</span><span class="p">(),</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">run_scenario_btn</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">scenario</span> <span class="o">=</span> <span class="n">Scenario</span><span class="p">(</span>
            <span class="n">uuid</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span><span class="p">,</span>
            <span class="n">extent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_extent</span><span class="p">,</span>
            <span class="n">models</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span><span class="p">,</span>
            <span class="n">weighted_models</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">priority_layer_groups</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_priority_layers_groups</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Creates and opens the progress dialog for the analysis</span>
        <span class="n">progress_dialog</span> <span class="o">=</span> <span class="n">ProgressDialog</span><span class="p">(</span>
            <span class="n">minimum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">maximum</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">main_widget</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">scenario_id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">scenario</span><span class="o">.</span><span class="n">uuid</span><span class="p">),</span>
            <span class="n">scenario_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">progress_dialog</span><span class="o">.</span><span class="n">analysis_cancelled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_progress_dialog_cancelled</span>
        <span class="p">)</span>
        <span class="n">progress_dialog</span><span class="o">.</span><span class="n">run_dialog</span><span class="p">()</span>

        <span class="n">progress_dialog</span><span class="o">.</span><span class="n">change_status_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"Raster calculation for models pathways"</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">analysis_task</span> <span class="o">=</span> <span class="n">ScenarioAnalysisTask</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_scenario_description</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_implementation_models</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_priority_layers_groups</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_extent</span><span class="p">,</span>
            <span class="n">scenario</span><span class="p">,</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">progress_dialog</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">progress_dialog</span><span class="o">.</span><span class="n">analysis_task</span> <span class="o">=</span> <span class="n">analysis_task</span>

        <span class="n">report_running</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_report_running</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">)</span>
        <span class="n">report_finished</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_report_finished</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">)</span>

        <span class="c1"># Report manager</span>
        <span class="n">scenario_report_manager</span> <span class="o">=</span> <span class="n">report_manager</span>

        <span class="n">scenario_report_manager</span><span class="o">.</span><span class="n">generate_started</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">report_running</span><span class="p">)</span>
        <span class="n">scenario_report_manager</span><span class="o">.</span><span class="n">generate_completed</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">report_finished</span><span class="p">)</span>

        <span class="n">analysis_complete</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_complete</span><span class="p">,</span> <span class="n">analysis_task</span><span class="p">,</span> <span class="n">scenario_report_manager</span>
        <span class="p">)</span>

        <span class="n">analysis_task</span><span class="o">.</span><span class="n">taskCompleted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">analysis_complete</span><span class="p">)</span>

        <span class="n">analysis_task</span><span class="o">.</span><span class="n">taskTerminated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_terminated</span><span class="p">)</span>

        <span class="n">QgsApplication</span><span class="o">.</span><span class="n">taskManager</span><span class="p">()</span><span class="o">.</span><span class="n">addTask</span><span class="p">(</span><span class="n">analysis_task</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span><span class="s2">"An error occurred when preparing analysis task"</span><span class="p">),</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">log</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span>
                <span class="s2">"An error occurred when preparing analysis task"</span>
                <span class="s1">', error message "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.run_report">
<span class="doc doc-object-name doc-function-name">run_report</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">run_report</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Run report generation. This should be called after the
analysis is complete.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>report_manager</code></td>
<td>
<code>ReportManager</code>
</td>
<td>
<div class="doc-md-description">
<p>Report manager used to generate analysis reports</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span>
<span class="normal">1478</span>
<span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">):</span>
    <span class="sd">"""Run report generation. This should be called after the</span>
<span class="sd">    analysis is complete.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param report_manager: Report manager used to generate analysis reports</span>
<span class="sd">    :type report_manager: ReportManager</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span><span class="p">:</span>
        <span class="c1"># Will not proceed if processing has been cancelled by the user</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">log</span><span class="p">(</span>
            <span class="s2">"Cannot run report generation, scenario result is not defined"</span><span class="p">,</span>
            <span class="n">info</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">reporting_feedback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset_reporting_feedback</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reporting_feedback</span> <span class="o">=</span> <span class="n">reporting_feedback</span>

    <span class="n">submit_result</span> <span class="o">=</span> <span class="n">report_manager</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="p">,</span> <span class="n">reporting_feedback</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">submit_result</span><span class="o">.</span><span class="n">status</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s2">"Unable to submit report request for scenario"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="o">.</span><span class="n">scenario</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.save_scenario">
<span class="doc doc-object-name doc-function-name">save_scenario</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">save_scenario</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Save current scenario details into settings</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">save_scenario</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Save current scenario details into settings"""</span>
    <span class="n">scenario_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_name</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">scenario_description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scenario_description</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">()</span>

    <span class="n">extent_box</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">extent</span><span class="o">.</span><span class="n">xMinimum</span><span class="p">(),</span>
        <span class="n">extent</span><span class="o">.</span><span class="n">xMaximum</span><span class="p">(),</span>
        <span class="n">extent</span><span class="o">.</span><span class="n">yMinimum</span><span class="p">(),</span>
        <span class="n">extent</span><span class="o">.</span><span class="n">yMaximum</span><span class="p">(),</span>
    <span class="p">]</span>

    <span class="n">settings_manager</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_NAME</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">)</span>
    <span class="n">settings_manager</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_DESCRIPTION</span><span class="p">,</span> <span class="n">scenario_description</span><span class="p">)</span>
    <span class="n">settings_manager</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">SCENARIO_EXTENT</span><span class="p">,</span> <span class="n">extent_box</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.scenario_results">
<span class="doc doc-object-name doc-function-name">scenario_results</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">scenario_results</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Called when the task ends. Sets the progress bar to 100 if it finished.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>task</code></td>
<td>
<code>ScenarioAnalysisTask</code>
</td>
<td>
<div class="doc-md-description">
<p>Analysis task</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>report_manager</code></td>
<td>
<code>ReportManager</code>
</td>
<td>
<div class="doc-md-description">
<p>Report manager used to generate analysis reports</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">scenario_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">):</span>
    <span class="sd">"""Called when the task ends. Sets the progress bar to 100 if it finished.</span>

<span class="sd">    :param task: Analysis task</span>
<span class="sd">    :type task: ScenarioAnalysisTask</span>

<span class="sd">    :param report_manager: Report manager used to generate analysis reports</span>
<span class="sd">    :type report_manager: ReportManager</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">output</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_progress_bar</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="o">.</span><span class="n">analysis_output</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">output</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ScenarioState</span><span class="o">.</span><span class="n">FINISHED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">post_analysis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scenario_result</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">report_manager</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">task</span><span class="o">.</span><span class="n">progress_dialog</span><span class="o">.</span><span class="n">change_status_message</span><span class="p">(</span>
            <span class="s2">"No valid output from the processing results."</span>
        <span class="p">)</span>
        <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">"No valid output from the processing results."</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.show_message">
<span class="doc doc-object-name doc-function-name">show_message</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">show_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Warning</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Shows message on the main widget message bar.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>message</code></td>
<td>
<code>str</code>
</td>
<td>
<div class="doc-md-description">
<p>Text message</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>level</code></td>
<td>
<code>Qgis.MessageLevel</code>
</td>
<td>
<div class="doc-md-description">
<p>Message level type</p>
</div>
</td>
<td>
<code><span title="qgis.core.Qgis.Warning">Warning</span></code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Warning</span><span class="p">):</span>
    <span class="sd">"""Shows message on the main widget message bar.</span>

<span class="sd">    :param message: Text message</span>
<span class="sd">    :type message: str</span>

<span class="sd">    :param level: Message level type</span>
<span class="sd">    :type level: Qgis.MessageLevel</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">clearWidgets</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.style_model_layer">
<span class="doc doc-object-name doc-function-name">style_model_layer</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">style_model_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Applies the styling to the layer that contains the passed
 implementation model name.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer</code></td>
<td>
<code>QgsRasterLayer</code>
</td>
<td>
<div class="doc-md-description">
<p>Raster layer to which to apply the symbology</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>model</code></td>
<td>
<code>ImplementationModel</code>
</td>
<td>
<div class="doc-md-description">
<p>Implementation model</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>QgsSingleBandPseudoColorRenderer</code>
</td>
<td>
<div class="doc-md-description">
<p>Renderer for the symbology.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">style_model_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
    <span class="sd">"""Applies the styling to the layer that contains the passed</span>
<span class="sd">     implementation model name.</span>

<span class="sd">    :param layer: Raster layer to which to apply the symbology</span>
<span class="sd">    :type layer: QgsRasterLayer</span>

<span class="sd">    :param model: Implementation model</span>
<span class="sd">    :type model: ImplementationModel</span>

<span class="sd">    :returns: Renderer for the symbology.</span>
<span class="sd">    :rtype: QgsSingleBandPseudoColorRenderer</span>
<span class="sd">    """</span>

    <span class="c1"># Retrieves a build-in QGIS color ramp</span>
    <span class="n">color_ramp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">model_color_ramp</span><span class="p">()</span>

    <span class="n">stats</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">()</span><span class="o">.</span><span class="n">bandStatistics</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">renderer</span> <span class="o">=</span> <span class="n">QgsSingleBandPseudoColorRenderer</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">renderer</span><span class="o">.</span><span class="n">setClassificationMin</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">minimumValue</span><span class="p">)</span>
    <span class="n">renderer</span><span class="o">.</span><span class="n">setClassificationMax</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">maximumValue</span><span class="p">)</span>

    <span class="n">renderer</span><span class="o">.</span><span class="n">createShader</span><span class="p">(</span>
        <span class="n">color_ramp</span><span class="p">,</span> <span class="n">QgsColorRampShader</span><span class="o">.</span><span class="n">Interpolated</span><span class="p">,</span> <span class="n">QgsColorRampShader</span><span class="o">.</span><span class="n">Continuous</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">renderer</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.style_models_layer">
<span class="doc doc-object-name doc-function-name">style_models_layer</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">style_models_layer</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">models</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Applies the styling to the passed layer that
 contains the passed list of models.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layer</code></td>
<td>
<code>QgsRasterLayer</code>
</td>
<td>
<div class="doc-md-description">
<p>Layer to be styled</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>models</code></td>
<td>
<code>list</code>
</td>
<td>
<div class="doc-md-description">
<p>List which contains the implementation models that were passed to the highest position analysis tool</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>QgsPalettedRasterRenderer</code>
</td>
<td>
<div class="doc-md-description">
<p>Renderer for the symbology.</p>
</div>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">style_models_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">models</span><span class="p">):</span>
    <span class="sd">"""Applies the styling to the passed layer that</span>
<span class="sd">     contains the passed list of models.</span>

<span class="sd">    :param layer: Layer to be styled</span>
<span class="sd">    :type layer: QgsRasterLayer</span>

<span class="sd">    :param models: List which contains the implementation</span>
<span class="sd">    models that were passed to the highest position analysis tool</span>
<span class="sd">    :type models: list</span>

<span class="sd">    :returns: Renderer for the symbology.</span>
<span class="sd">    :rtype: QgsPalettedRasterRenderer</span>
<span class="sd">    """</span>
    <span class="n">area_classes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
        <span class="n">im_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">name</span>

        <span class="n">raster_val</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">style_pixel_value</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">scenario_fill_symbol</span><span class="p">()</span><span class="o">.</span><span class="n">color</span><span class="p">()</span>
        <span class="n">color_ramp_shader</span> <span class="o">=</span> <span class="n">QgsColorRampShader</span><span class="o">.</span><span class="n">ColorRampItem</span><span class="p">(</span>
            <span class="nb">float</span><span class="p">(</span><span class="n">raster_val</span><span class="p">),</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="n">color</span><span class="p">),</span> <span class="n">im_name</span>
        <span class="p">)</span>
        <span class="n">area_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color_ramp_shader</span><span class="p">)</span>

    <span class="n">class_data</span> <span class="o">=</span> <span class="n">QgsPalettedRasterRenderer</span><span class="o">.</span><span class="n">colorTableToClassData</span><span class="p">(</span><span class="n">area_classes</span><span class="p">)</span>
    <span class="n">renderer</span> <span class="o">=</span> <span class="n">QgsPalettedRasterRenderer</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">dataProvider</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">class_data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">renderer</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.task_terminated">
<span class="doc doc-object-name doc-function-name">task_terminated</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">task_terminated</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Handles logging of the scenario analysis task status
after it has been terminated.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">992</span>
<span class="normal">993</span>
<span class="normal">994</span>
<span class="normal">995</span>
<span class="normal">996</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">task_terminated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Handles logging of the scenario analysis task status</span>
<span class="sd">    after it has been terminated.</span>
<span class="sd">    """</span>
    <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Main task terminated"</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.transform_extent">
<span class="doc doc-object-name doc-function-name">transform_extent</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">transform_extent</span><span class="p">(</span><span class="n">extent</span><span class="p">,</span> <span class="n">source_crs</span><span class="p">,</span> <span class="n">dest_crs</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Transforms the passed extent into the destination crs</p>
<p>:param extent: Target extent</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source_crs</code></td>
<td>
<code>QgsCoordinateReferenceSystem</code>
</td>
<td>
<div class="doc-md-description">
<p>Source CRS of the passed extent</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>dest_crs</code></td>
<td>
<code>QgsCoordinateReferenceSystem</code>
</td>
<td>
<div class="doc-md-description">
<p>Destination CRS</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">transform_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extent</span><span class="p">,</span> <span class="n">source_crs</span><span class="p">,</span> <span class="n">dest_crs</span><span class="p">):</span>
    <span class="sd">"""Transforms the passed extent into the destination crs</span>

<span class="sd">     :param extent: Target extent</span>
<span class="sd">    :type extent: QgsRectangle</span>

<span class="sd">    :param source_crs: Source CRS of the passed extent</span>
<span class="sd">    :type source_crs: QgsCoordinateReferenceSystem</span>

<span class="sd">    :param dest_crs: Destination CRS</span>
<span class="sd">    :type dest_crs: QgsCoordinateReferenceSystem</span>
<span class="sd">    """</span>

    <span class="n">transform</span> <span class="o">=</span> <span class="n">QgsCoordinateTransform</span><span class="p">(</span><span class="n">source_crs</span><span class="p">,</span> <span class="n">dest_crs</span><span class="p">,</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">())</span>
    <span class="n">transformed_extent</span> <span class="o">=</span> <span class="n">transform</span><span class="o">.</span><span class="n">transformBoundingBox</span><span class="p">(</span><span class="n">extent</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">transformed_extent</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_message_bar">
<span class="doc doc-object-name doc-function-name">update_message_bar</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">update_message_bar</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Changes the message in the message bar item.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>message</code></td>
<td>
<code>str</code>
</td>
<td>
<div class="doc-md-description">
<p>Message to be updated</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_message_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">"""Changes the message in the message bar item.</span>

<span class="sd">    :param message: Message to be updated</span>
<span class="sd">    :type message: str</span>
<span class="sd">    """</span>
    <span class="n">message_bar_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">createMessage</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">message_bar</span><span class="o">.</span><span class="n">pushWidget</span><span class="p">(</span><span class="n">message_bar_item</span><span class="p">,</span> <span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_priority_layers">
<span class="doc doc-object-name doc-function-name">update_priority_layers</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">update_priority_layers</span><span class="p">(</span><span class="n">update_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Updates the priority weighting layers list in the UI.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>update_groups</code></td>
<td>
<code>bool</code>
</td>
<td>
<div class="doc-md-description">
<p>Whether to update the priority groups list or not</p>
</div>
</td>
<td>
<code>True</code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_priority_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">"""Updates the priority weighting layers list in the UI.</span>

<span class="sd">    :param update_groups: Whether to update the priority groups list or not</span>
<span class="sd">    :type update_groups: bool</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">settings_manager</span><span class="o">.</span><span class="n">get_priority_layers</span><span class="p">():</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">()</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DisplayRole</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">))</span>
        <span class="n">item</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">UserRole</span><span class="p">,</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"uuid"</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">priority_layers_list</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">update_groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItemCount</span><span class="p">()):</span>
                <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">priority_groups_list</span><span class="o">.</span><span class="n">topLevelItem</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="ow">in</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"groups"</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_priority_layer_group</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">group_children</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">takeChildren</span><span class="p">()</span>
                    <span class="n">children</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">group_children</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"name"</span><span class="p">):</span>
                            <span class="k">continue</span>
                        <span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                    <span class="n">group</span><span class="o">.</span><span class="n">addChildren</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>

    <span class="c1"># Trigger check to enable/disable PWLs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_extent_changed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extent_box</span><span class="o">.</span><span class="n">outputExtent</span><span class="p">())</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_progress_bar">
<span class="doc doc-object-name doc-function-name">update_progress_bar</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">update_progress_bar</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Sets the value of the progress bar</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<code>float</code>
</td>
<td>
<div class="doc-md-description">
<p>Value to be set on the progress bar</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_progress_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_dialog</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">"""Sets the value of the progress bar</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param value: Value to be set on the progress bar</span>
<span class="sd">    :type value: float</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">progress_dialog</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing_cancelled</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">progress_dialog</span><span class="o">.</span><span class="n">update_progress_bar</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="n">log</span><span class="p">(</span><span class="n">tr</span><span class="p">(</span><span class="s2">"Error setting value to a progress bar"</span><span class="p">),</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_progress_dialog">
<span class="doc doc-object-name doc-function-name">update_progress_dialog</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">update_progress_dialog</span><span class="p">(</span><span class="n">progress_dialog</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Run report generation. This should be called after the
 analysis is complete.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>progress_dialog</code></td>
<td>
<code>ProgressDialog</code>
</td>
<td>
<div class="doc-md-description">
<p>Dialog responsible for showing all the analysis operations progress.</p>
</div>
</td>
<td>
<em>required</em>
</td>
</tr>
<tr>
<td><code>message</code></td>
<td>
<code>ReportManager</code>
</td>
<td>
<div class="doc-md-description">
<p>Report manager used to generate analysis reports</p>
</div>
</td>
<td>
<code>None</code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_progress_dialog</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">progress_dialog</span><span class="p">,</span>
    <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""Run report generation. This should be called after the</span>
<span class="sd">     analysis is complete.</span>

<span class="sd">    :param progress_dialog: Dialog responsible for showing</span>
<span class="sd">     all the analysis operations progress.</span>
<span class="sd">    :type progress_dialog: ProgressDialog</span>

<span class="sd">    :param message: Report manager used to generate analysis reports</span>
<span class="sd">    :type message: ReportManager</span>
<span class="sd">    """</span>

    <span class="n">progress_dialog</span><span class="o">.</span><span class="n">change_status_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="k">if</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.update_pwl_layers">
<span class="doc doc-object-name doc-function-name">update_pwl_layers</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">update_pwl_layers</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Updates the priority layers path available in
the store implementation models</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>notify</code></td>
<td>
<code>bool</code>
</td>
<td>
<div class="doc-md-description">
<p>Whether to show message to user about the update</p>
</div>
</td>
<td>
<code>False</code>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_pwl_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""Updates the priority layers path available in</span>
<span class="sd">    the store implementation models</span>

<span class="sd">    :param notify: Whether to show message to user about the update</span>
<span class="sd">    :type notify: bool</span>
<span class="sd">    """</span>
    <span class="n">settings_manager</span><span class="o">.</span><span class="n">update_implementation_models</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_priority_layers</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">notify</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_message</span><span class="p">(</span>
            <span class="n">tr</span><span class="p">(</span>
                <span class="s2">"Updated all the implementation models"</span>
                <span class="s2">" with their respective priority layers"</span>
            <span class="p">),</span>
            <span class="n">Qgis</span><span class="o">.</span><span class="n">Info</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="n">log</span><span class="p">(</span>
        <span class="n">tr</span><span class="p">(</span>
            <span class="s2">"Updated all the implementation models"</span>
            <span class="s2">" with their respective priority layers"</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="src.cplus_plugin.gui.qgis_cplus_main.QgisCplusMain.zoom_pilot_area">
<span class="doc doc-object-name doc-function-name">zoom_pilot_area</span>
</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">zoom_pilot_area</span><span class="p">()</span>
</code></pre></div>
<div class="doc doc-contents">
<p>Zoom the current main map canvas to the pilot area extent.</p>
<details class="quote">
<summary>Source code in <code>/home/samweli/Workspace/Projects/cplus-plugin/src/cplus_plugin/gui/qgis_cplus_main.py</code></summary>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_pilot_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Zoom the current main map canvas to the pilot area extent."""</span>
    <span class="n">map_canvas</span> <span class="o">=</span> <span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">()</span>
    <span class="n">extent_list</span> <span class="o">=</span> <span class="n">PILOT_AREA_EXTENT</span><span class="p">[</span><span class="s2">"coordinates"</span><span class="p">]</span>
    <span class="n">default_extent</span> <span class="o">=</span> <span class="n">QgsRectangle</span><span class="p">(</span>
        <span class="n">extent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">zoom_extent</span> <span class="o">=</span> <span class="n">QgsRectangle</span><span class="p">(</span>
        <span class="n">extent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">extent_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">canvas_crs</span> <span class="o">=</span> <span class="n">map_canvas</span><span class="o">.</span><span class="n">mapSettings</span><span class="p">()</span><span class="o">.</span><span class="n">destinationCrs</span><span class="p">()</span>
    <span class="n">original_crs</span> <span class="o">=</span> <span class="n">QgsCoordinateReferenceSystem</span><span class="p">(</span><span class="s2">"EPSG:4326"</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">canvas_crs</span><span class="o">.</span><span class="n">authid</span><span class="p">()</span> <span class="o">!=</span> <span class="n">original_crs</span><span class="o">.</span><span class="n">authid</span><span class="p">():</span>
        <span class="n">zoom_extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_extent</span><span class="p">(</span><span class="n">zoom_extent</span><span class="p">,</span> <span class="n">original_crs</span><span class="p">,</span> <span class="n">canvas_crs</span><span class="p">)</span>
        <span class="n">default_extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_extent</span><span class="p">(</span>
            <span class="n">default_extent</span><span class="p">,</span> <span class="n">original_crs</span><span class="p">,</span> <span class="n">canvas_crs</span>
        <span class="p">)</span>

    <span class="n">aoi</span> <span class="o">=</span> <span class="n">QgsRubberBand</span><span class="p">(</span><span class="n">iface</span><span class="o">.</span><span class="n">mapCanvas</span><span class="p">(),</span> <span class="n">QgsWkbTypes</span><span class="o">.</span><span class="n">PolygonGeometry</span><span class="p">)</span>

    <span class="n">aoi</span><span class="o">.</span><span class="n">setFillColor</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">aoi</span><span class="o">.</span><span class="n">setStrokeColor</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
    <span class="n">aoi</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">aoi</span><span class="o">.</span><span class="n">setLineStyle</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>

    <span class="n">geom</span> <span class="o">=</span> <span class="n">QgsGeometry</span><span class="o">.</span><span class="n">fromRect</span><span class="p">(</span><span class="n">default_extent</span><span class="p">)</span>

    <span class="n">aoi</span><span class="o">.</span><span class="n">setToGeometry</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">canvas_crs</span><span class="p">)</span>

    <span class="n">map_canvas</span><span class="o">.</span><span class="n">setExtent</span><span class="p">(</span><span class="n">zoom_extent</span><span class="p">)</span>
    <span class="n">map_canvas</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Copyright Conservation International, 2023</p>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script defer="" src="../../../../js/base.js"></script>
<div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true"></span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
